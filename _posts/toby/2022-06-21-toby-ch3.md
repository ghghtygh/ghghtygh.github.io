---
title : "토비의 스프링 - 3.템플릿"

categories:
 - Posts

tags:
 - [Spring, Book, 토비의스프링]

#toc: true
#toc_sticky: true
published: true
date: 2022-06-21
last_modified_at: 2022-06-21
---

# 3장 템플릿 요약

## 분리와 재사용을 위한 디자인 패턴 적용

### JDBC 코드

DB 커넥션이라는 제한적인 리소스를 공유하기 때문에 반드시 리소스가 반환되도록 예외처리가 필요

### 템플릿 메서드 패턴

- 상속을 통해 기능을 확장해서 사용
- 슈퍼클래스에 변하지 않는 부분을 두고 변하는 부분을 추상 메서드로 정의, 서브 클래스에서 추상 메서드를 오버라이드하여 새롭게 정의하여 사용
- 장점: 상속을 통한 기능의 확장이 자유로움, 개방 폐쇠 원칙을 지키는 구조
- 단점: DAO 로직마다 새로운 클래스 정의 필요, 확장 구조가 클래스 설계 시점에서 고정 - 관계의 유연성 부족

### 전략 패턴

- 오브젝트를 두개로 분리한 뒤 클래스 레벨에서는 인터페이스를 통해서만 의존
- 변하는 부분을 별도의 클래스로 만들어 추상화된 인터페이스를 통해 위임
- Client에서 선택한 전략의 오브젝트를 Context에 전달, Context에서는 전달받은 Strategy 구현 클래스의 오브젝트를 사용
- JDBC 작업 흐름이 담긴 메서드를 공유할 때 DAO 메서드마다 새로운 구현 클래스를 만들어야하는 점과 생성자 및 인스턴스 변수를 만들어야 하는 점을 개선하기 위해 전략 클래스를 내부 클래스로 정의

### 중첩 클래스

- 다른 클래스 내부에 정의되는 클래스
- 독립적인 오브젝트로 만들어질 수 있는 스태틱 클래스와 자신이 정의된 클래스의 오브젝트 안에서만 만들어질 수 있는 내부 클래스로 구분
- 범위에 따라 오브젝트 레벨에 정의되는 멤버 내부 클래스, 메서드 레벨에 정의되는 로컬 클래스, 이름을 갖지 않는 익명 내부 클래스로 구분

## 템플릿과 콜백

### 템플릿(template)

- 어떤 목적을 위해 미리 만들어둔 모양이 있는 틀
- 도형을 그릴 때 사용하는 도형자 또는 모형자
- 프로그래밍에서는 고정된 틀 안에 바꿀 수 있는 부분을 넣어서 사용하는 경우를 말함
- JSP는 HTML이라는 고정된 부분에 EL과 스크립릿이라는 변하는 부분을 넣은 일종의 템플릿 파일

### 콜백(callback)

- 실행되는 것을 목적으로 다른 오브젝트의 메서드에 전달되는 오브젝트
- 파라미터로 전달되지만 값을 참조하는 것이 아닌 특정 로직을 담은 메서드를 실행시키기 위해 사용
- 자바에서는 메서드가 담긴 오브젝트를 전달

### 템플릿 메서드 패턴

- 코드 중에서 일정한 패턴으로 유지되는 부분과 자유롭게 변경되는 성질을 독립시켜 효과적으로 활용하는 방법
- 고정된 틀(로직)을 가진 템플릿 메서드를 슈퍼클래스에 두고, 바뀌는 부분을 서브클래스의 메서드로 두는 구조

### 템플릿/콜백 패턴

- 일반적인 DI는 템플릿에 인스턴스 변수를 만들어 두고 사용할 의존 오브젝트를 수정자 메서드로 받아서 사용, 템플릿/콜백 방식에서는 매번 메서드 단위로 사용할 오브젝트를 새롭게 전달받음
- 콜백 메서드의 리턴 값과 파라미터 값으로 제네릭스(Generics)를 이용하면 다양한 오브젝트 타입을 지원 가능